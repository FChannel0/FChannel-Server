version: '3.9'
services:
  db:
    image: postgres:alpine
    restart: unless-stopped
    environment:
      POSTGRES_PASSWORD: hackme
    expose:
    - 5432
    volumes:
      - ./pgdata/:/var/lib/postgresql/data/
  app:
    build: ./
    depends_on:
      - db
    restart: unless-stopped
    volumes:
      - ./public/:/app/public/
      - ./pem/:/app/pem/
      - ./static/:/app/static/
    environment:
      INSTANCE_DOMAIN: 192.168.1.205
      INSTANCE_PROTOCOL: http
      INSTANCE_NAME: LChan
      INSTANCE_FILESIZE_LIMIT: 64

      DB_HOST: db
      DB_PASS: hackme
    ports:
      - 80:3000
